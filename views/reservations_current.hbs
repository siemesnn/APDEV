{{!-- this is currentreservations.ejs ver--}}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/sidebar-admin.css">
    <link rel="stylesheet" href="css/colors.css">
    <script src="js/view_reservation_page.js"></script>
    <title>{{title}}</title>
</head>

{{!-- student sidebar --}}
<aside class="Sidebar">
    <div class="image-container">
      <img src="assets/jeongwoo.jpg" alt="userpfp" id="userpfp">
      <br>
      <br>
    </div>
  
    <ul class="sidebar-links">
      <li>
        <br><br>
        <a href="/home">Reserve</a>
      </li>
      <li>
        <br><br>
        <a href="/reserve">My Reservations</a>
      </li>
      <li>
        <br><br>
        <a href="/profile" id="profile">My Profile</a>
      </li>
      <li>
        <br><br><br>
        <a href="/logout" id="logout">Logout</a>
      </li>
    </ul>
</aside>

<link rel="stylesheet" href="css/myreservation.css">

<div class="notSidebar">

    <div class="greeting-profile">
        <h2> Reservations </h2>
    </div>

    <div class="table-container">
        <table class="reservations-table">
            <thead>
                <tr>
                    <th>Lab</th>
                    <th>Seat</th>
                    <th>Date</th>
                    <th>Start Time</th>
                    <th>End Time</th>
                    <th>Reservation Name</th>
                </tr>
            </thead>
            <tbody>
                {{#each Reservation}}
                        <tr>
                            <td>{{#if lab_id}}{{ lab_id }}{{else}}N/A{{/if}}</td>
                            <td>{{#if seatNumber}}{{ seatNumber }}{{else}}N/A{{/if}}</td>
                            <td>{{#if date}}{{ date }}{{else}}N/A{{/if}}</td>
                            <td>{{#if start_time}}{{ start_time }}{{else}}N/A{{/if}}</td>
                            <!-- Calculate End Time based on Start Time and Duration -->
                            <td>{{#if end_time}}{{ end_time }}{{else}}N/A{{/if}}</td>
                            <td>                                
                                {{#if anonymous}}Anonymous{{else}}{{ reserved_by }}{{/if}}
                            </td>
                        </tr>
                    {{/each}}
            </tbody>
        </table>
    </div>

    <div class="button-container">
        <button class="button" id="editReservationButton">Edit Reservation</button>
        <button class="button" id="cancelReservationButton">Cancel Reservation</button>
    </div>

</div>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Get the table element
        var table = document.querySelector(".reservations-table");
        
        // Add click event listener to the table rows
        table.addEventListener("click", function(event) {
            // Remove the 'selected' class from all rows
            var rows = table.querySelectorAll("tr");
            rows.forEach(function(row) {
                row.classList.remove("select");
            });
            
            // Check if the clicked element is a table row
            if (event.target.tagName === "TR") {
                // Add the 'selected' class to the clicked row
                event.target.classList.add("select");
            }
        });
    });

</script>
